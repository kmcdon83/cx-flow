# CxFlow Batch Mode Email Notification of Proposed Not Exploitables

**Lab Goals**

This lab is designed to teach the following topics:

-   Run CxFlow in batch mode with XML results output

-   Automate email notifications using [Email Notifications on New
    Vulnerabilities](https://checkmarx.atlassian.net/wiki/spaces/PTS/pages/1214349313/Email+Notifications+on+New+Vulnerabilities)

**CxFlow Prep**

-   Create a new folder in C:\\ called CxFlow and download the latest
    CxFlow .jar for JDK 8 into this folder from
    <https://github.com/checkmarx-ts/cx-flow/releases>

    -   The current release of this lab guide =  cx-flow.1.5.4.jar

-   Create a new file called application-cxxml.yml in C:\\Flow with the
    text at the bottom of the page and replace any values surrounded in
    \#\#\#\<\>\#\#\# with your appropriate values

-   Create a new file called EmailPNEVulns.ps1 in C:\\Flow with the text
    at the bottom of the page and replace any values surrounded in
    \#\#\#\<\>\#\#\# with your appropriate values (see **SMTP Server
    Prep** steps below)

-   Go over all of the config items and read what they do

    -    [CxFlow Configuration](CxFlow_Configuration)

    -   [Bug Trackers / Feedback
        Channels](Bug_Trackers_Feedback_Channels)

**SMTP Server Prep**

-   Open a google chrome browser window & signup for SendGrid using a
    personal or fake email

    -   <https://signup.sendgrid.com/>

-   Confirm your email address

-   Click Email API\>Integration Guide on the left sidebar

    -   Choose SMTP Relay

    -   My First API Key Name - CxSAST

    -   Click Create Key & copy/paste into the application-email.yml
        file

-   Scan the following GitHub project using source control scan in
    CxSAST under the following team

    -   [Configuring the Connection to a Source Control System (v9.0.0
        and
        up)](https://checkmarx.atlassian.net/wiki/spaces/KC/pages/1170247900)

        -   URL = https://github.com/ethicalhack3r/DVWA.git

        -   Team = CxServer\\SP\\Company

        -   Project Name = DVWA

    -   After the scan completes, open the CxViewer & mark all
        SQL\_Injection as Proposed Not Exploitable

        -   [Navigating Scan Results (v9.0.0 and
            up)](https://checkmarx.atlassian.net/wiki/spaces/KC/pages/1170245301)

**Triggering CxFlow XML creation from CLI & Email from Powershell**

-   After the .YML file & .PS1 file are completely filled out and saved

-   Run CxFlow in batch mode & the email PowerShell script by opening a
    Powershell prompt and typing the following

``` java
cd C:\CxFlow
java -jar cx-flow-1.5.4.jar --spring.config.location="C:\CxFlow\application-email.yml" --project --cx-team="CxServer\SP\Company" --cx-project="DVWA" --app="DVWA"
.\EmailPNEVulns.ps1 -results_xml .\xmlresults.xml -email <youremail@checkmarx.com>
```

-   Open your email & verify that the Proposed Not Exploitable results
    have been emailed.

-   The email might be in your junk folder.

**Bonus -** You can use Windows Task Scheduler to call the above
commands/scripts & run this every evening.

The below YAML file is for 8.9 - please update using directions on
[Workflow Labs & Guides](Workflow_Labs_Guides) for 9.0
